!function(){"use strict";function t(t,e,r){r.otherwise("/posts"),e.state("posts",{url:"/posts",templateUrl:"posts/index.view.html",controller:"Posts.IndexController",controllerAs:"vm",data:{activeTab:"posts"}}).state("posts/add",{url:"/posts/add",templateUrl:"posts/add-edit.view.html",controller:"Posts.AddEditController",controllerAs:"vm",data:{activeTab:"posts"}}).state("posts/edit",{url:"/posts/edit/:_id",templateUrl:"posts/add-edit.view.html",controller:"Posts.AddEditController",controllerAs:"vm",data:{activeTab:"posts"}}).state("pages",{url:"/pages",templateUrl:"pages/index.view.html",controller:"Pages.IndexController",controllerAs:"vm",data:{activeTab:"pages"}}).state("pages/add",{url:"/pages/add",templateUrl:"pages/add-edit.view.html",controller:"Pages.AddEditController",controllerAs:"vm",data:{activeTab:"pages"}}).state("pages/edit",{url:"/pages/edit/:_id",templateUrl:"pages/add-edit.view.html",controller:"Pages.AddEditController",controllerAs:"vm",data:{activeTab:"pages"}}).state("redirects",{url:"/redirects",templateUrl:"redirects/index.view.html",controller:"Redirects.IndexController",controllerAs:"vm",data:{activeTab:"redirects"}}).state("redirects/add",{url:"/redirects/add",templateUrl:"redirects/add-edit.view.html",controller:"Redirects.AddEditController",controllerAs:"vm",data:{activeTab:"redirects"}}).state("redirects/edit",{url:"/redirects/edit/:_id",templateUrl:"redirects/add-edit.view.html",controller:"Redirects.AddEditController",controllerAs:"vm",data:{activeTab:"redirects"}}).state("account",{url:"/account",templateUrl:"account/index.view.html",controller:"Account.IndexController",controllerAs:"vm",data:{activeTab:"account"}})}function e(t,e,r){t.defaults.headers.common.Authorization="Bearer "+r.jwtToken,e.$on("$stateChangeSuccess",function(t,r,o,a,l){e.activeTab=r.data.activeTab})}t.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"],e.$inject=["$http","$rootScope","$window"],angular.module("app",["ui.router"]).config(t).run(e),$(function(){$.get("/token",function(t){window.jwtToken=t,angular.bootstrap(document,["app"])})})}();
!function(){"use strict";function t(t){return{require:"ngModel",link:function(t,e,r,n){e.addClass("datepicker"),e.datepicker({dateFormat:"dd/mm/yy"}),n.$formatters.push(function(t){if(t)return moment(t).format("DD/MM/YYYY")}),n.$parsers.push(function(t){if(t)return moment(t,"DD/MM/YYYY").format("YYYY-MM-DD")})}}}t.$inject=["$filter"],angular.module("app").directive("datepicker",t)}();
!function(){"use strict";function n(n){return{require:"ngModel",link:function(r,t,u,e){e.$formatters.push(function(r){return n("csv")(r)}),e.$parsers.push(function(n){var r=_.map(n.split(","),function(n){return n.trim()});return r=_.filter(r,function(n){return n})})}}}n.$inject=["$filter"],angular.module("app").directive("tags",n)}();
!function(){"use strict";function e(e){return{require:"ngModel",link:function(e,i,t,n){var a;a="minimal"===t.wysiwyg?{height:100,toolbar:[{name:"basic",items:["Bold","Italic","Underline"]},{name:"links",items:["Link","Unlink"]},{name:"tools",items:["Maximize"]},{name:"document",items:["Source"]}],removePlugins:"elementspath",resize_enabled:!1,allowedContent:!0}:{filebrowserImageUploadUrl:"/admin/upload",removeButtons:"About,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Save,CreateDiv,Language,BidiLtr,BidiRtl,Flash,Iframe,addFile,Styles",allowedContent:!0},i.ckeditor(a).editor.on("change",function(){n.$setViewValue(this.getData())})}}}e.$inject=["$rootScope"],angular.module("app").directive("wysiwyg",e)}();
!function(){"use strict";function n(){return function(n){if(n)return n.toString().replace(/,/g,", ")}}angular.module("app").filter("csv",n)}();
!function(){"use strict";function r(){return function(r){if(r){var e=r.toLowerCase().trim();return e=e.replace(/[^a-z0-9\s-]/g," "),e=e.replace(/[\s-]+/g,"-")}}}angular.module("app").filter("slugify",r)}();
!function(){"use strict";function e(e){function n(n,t){e.flash={message:n,type:"success",keepAfterLocationChange:t}}function t(n,t){e.flash={message:n,type:"danger",keepAfterLocationChange:t}}var a={};return a.Success=n,a.Error=t,function(){function n(){var n=e.flash;n&&(n.keepAfterLocationChange?n.keepAfterLocationChange=!1:delete e.flash)}e.$on("$locationChangeStart",function(){n()})}(),a}e.$inject=["$rootScope"],angular.module("app").factory("AlertService",e)}();
!function(){"use strict";function t(t,e){function n(t){return t.data}function r(t){return e.reject(t.data&&t.data.Message)}return function(e){function u(){return t.get(e).then(n,r)}function a(u){return t.get(e+"/"+u).then(n,r)}function c(u){return u._id?t.put(e+"/"+u._id,u).then(n,r):t.post(e,u).then(n,r)}function i(u){return t.delete(e+"/"+u).then(n,r)}var o={};return o.GetAll=u,o.GetById=a,o.Save=c,o.Delete=i,o}}t.$inject=["$http","$q"],angular.module("app").factory("DataService",t)}();
!function(){"use strict";function e(e){return e("/api/pages")}e.$inject=["DataService"],angular.module("app").factory("PageService",e)}();
!function(){"use strict";function t(t){return t("/api/posts")}t.$inject=["DataService"],angular.module("app").factory("PostService",t)}();
!function(){"use strict";function e(e){return e("/api/redirects")}e.$inject=["DataService"],angular.module("app").factory("RedirectService",e)}();
!function(){"use strict";function t(t,n){function r(){return t.get("/api/users/current").then(u,a)}function e(n){return t.put("/api/users/"+n._id,n).then(u,a)}function u(t){return t.data}function a(t){return n.reject(t.data)}var c={};return c.GetCurrent=r,c.Update=e,c}t.$inject=["$http","$q"],angular.module("app").factory("UserService",t)}();
!function(){"use strict";function e(e,n,t){function r(){n.Update(o.user).then(function(){t.Success("User updated")}).catch(function(e){t.Error(e)})}function c(){n.Delete(o.user._id).then(function(){e.location="/login"}).catch(function(e){t.Error(e)})}var o=this;o.user=null,o.saveUser=r,o.deleteUser=c,function(){n.GetCurrent().then(function(e){o.user=e})}()}e.$inject=["$window","UserService","AlertService"],angular.module("app").controller("Account.IndexController",e)}();
!function(){"use strict";function e(e,t,c,i,r){function n(){i.Save(o.redirect).then(function(){r.Success("Redirect saved",!0),t.path("/redirects")}).catch(function(e){r.Error(e)})}function d(){i.Delete(o.redirect._id).then(function(){r.Success("Redirect deleted",!0),t.path("/redirects")}).catch(function(e){r.Error(e)})}var o=this;o.redirect={},o.saveRedirect=n,o.deleteRedirect=d,function(){o.loading=0,e._id&&(o.loading+=1,i.GetById(e._id).then(function(e){o.loading-=1,o.redirect=e}))}()}e.$inject=["$stateParams","$location","$filter","RedirectService","AlertService"],angular.module("app").controller("Redirects.AddEditController",e)}();
!function(){"use strict";function e(e){var n=this;n.redirects=[],function(){n.loading=!0,e.GetAll().then(function(e){n.loading=!1,n.redirects=e})}()}e.$inject=["RedirectService"],angular.module("app").controller("Redirects.IndexController",e)}();
!function(){"use strict";function e(e,t,a,n,i){function c(){n.Save(r.page).then(function(){i.Success("Page saved",!0),t.path("/pages")}).catch(function(e){i.Error(e)})}function o(){n.Delete(r.page._id).then(function(){i.Success("Page deleted",!0),t.path("/pages")}).catch(function(e){i.Error(e)})}var r=this;r.page={},r.savePage=c,r.deletePage=o,function(){r.loading=0,e._id?(r.loading+=1,n.GetById(e._id).then(function(e){r.loading-=1,r.page=e})):r.page={publish:!0}}()}e.$inject=["$stateParams","$location","$filter","PageService","AlertService"],angular.module("app").controller("Pages.AddEditController",e)}();
!function(){"use strict";function n(n){var e=this;e.pages=[],function(){e.loading=!0,n.GetAll().then(function(n){e.loading=!1,e.pages=n})}()}n.$inject=["PageService"],angular.module("app").controller("Pages.IndexController",n)}();
!function(){"use strict";function t(t,o,n,e){function s(){n.Save(c.post).then(function(){e.Success("Post saved",!0),o.path("/posts")}).catch(function(t){e.Error(t)})}function i(){n.Delete(c.post._id).then(function(){e.Success("Post deleted",!0),o.path("/posts")}).catch(function(t){e.Error(t)})}var c=this;c.post={},c.savePost=s,c.deletePost=i,function(){c.loading=0,t._id?(c.loading+=1,n.GetById(t._id).then(function(t){c.loading-=1,c.post=t})):c.post={publishDate:moment().format("YYYY-MM-DD"),publish:!0}}()}t.$inject=["$stateParams","$location","PostService","AlertService"],angular.module("app").controller("Posts.AddEditController",t)}();
!function(){"use strict";function n(n){var t=this;t.posts=[],function(){t.loading=!0,n.GetAll().then(function(n){t.loading=!1,t.posts=n})}()}n.$inject=["PostService"],angular.module("app").controller("Posts.IndexController",n)}();